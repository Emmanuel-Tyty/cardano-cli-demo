version: '3.8'

services:
  cardano-node:
    image: ghcr.io/intersectmbo/cardano-node:latest
    container_name: cardano-cli-demo-node
    environment:
      - NETWORK=preview
      - CARDANO_NODE_SOCKET_PATH=/ipc/node.socket
    volumes:
      # Blockchain data (persistent)
      - cardano-data:/data/db
      - cardano-ipc:/ipc
      # Local directories for file creation
      - ./keys:/workspace/keys
      - ./transactions:/workspace/transactions
      - ./examples:/workspace/examples
      # Working directory
      - .:/workspace
    working_dir: /workspace
    ports:
      - "3001:3001"
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-size: "200k"
        max-file: "10"

volumes:
  cardano-data:
  cardano-ipc:
